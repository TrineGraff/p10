IP.IE = Quandl("FRED/IPB52131NQ")
IP.IE
IP
IP.CG
IP.Min = Quandl("FRED/IPG212NQ")
IP.BE = Quandl("FRED/IPBUSEQ")
IP.BE = Quandl("FRED/IPBUNEQ")
IP.BE = Quandl("FRED/IPBUNQ")
GDP = Quandl("FRED/GDP")
GDP
#Industrial Production Grwoth
library(Quandl)
GDP = Quandl("FRED/GDP")
IP = Quandl("FRED/INDPRO")
head(IP)
IPS10 = Quandl("FRED/IPB50001SQ")
CES003 = Quandl("FRED/CES0600000001") #NSA
##Interest Rates (PROCENT) (NSA)
FYFF = Quandl("FRED/FF") #NSA
FYFF
FYGM6 =  Quandl("FRED/TB6MS")
FYGM6
FYGT1 = Quanfl("FRED/TB1YS")
FYGT5 = Quandl("FRED/GS5")
##Interest Rates (PROCENT) (NSA) (MONTLY)
FYFF = Quandl("FRED/FEDFUNDS") #NSA
FYGM3 = Quandl("FRED/TB3MS") #NSA
FYGM6 =  Quandl("FRED/TB6MS") #NSA
FYGT1 = Quandl("FRED/GS1") #NSA
FYGT5 = Quandl("FRED/GS5") #NSA
FYG10 = Quandl("FRED/GS10") #NSA
FYAAAC =
FYBAAC =
## Interest Rates Differences
SFYGM6 = FYGM6$Value - FYGM3$Value
FYGM6$Value
FYAAAC =
FYBAAC =
## Interest Rates Differences
SFYGM6 = lenght(FYGM6$Value) - FYGM3$Value
FYAAAC =
FYBAAC =
## Interest Rates Differences
SFYGM6 = length(FYGM6$Value) - FYGM3$Value
length(FYGM6$Value)
length(FYGM3$Value)
FYGM3
library(Quandl)
GDP = Quandl("FRED/GDP")
IPS10 = Quandl("FRED/IPB50001SQ")
IPS11 =
IPS299 = Quandl("FRED/IPB50002SQ")
IPS12 = Quandl("FRED/IPB51000SQ")
IPS13 = Quandl("FRED/IPB51100SQ")
IPS18 = Quandl("FRED/IPB51200SQ")
IPS25 = Quandl("FRED/IPB52100SQ")
IPS32 = Quandl("FRED/IPB53000SQ")
IPS34 = Quandl("FRED/IPB53100SQ")
IPS38 = Quandl("FRED/IPB53200SQ")
IPS43 = Quandl("FRED/IPB00004SQ")
IPS307 = Quandl("FRED/IPB51222SQ")
IPS306 =Quandl("FRED/IPB51221SQ")
PMP =
UTL11 = Quandl("FRED/CAPB00004SQ")
PMP =
UTL11 = Quandl("FRED/CAPB00004SQ")
#PMP =
UTL11 = Quandl("FRED/CAPB00004SQ")
## (ALL) Employment (MONTHLY)
CES002 = Quandl("FRED/CEU0500000001") #NSA
CES003 = Quandl("FRED/CEU0600000001") #NSA
CES006 = Quandl("FRED/CES1021000001") #SA
CES011 = Quandl("FRED/USCONS") #SA
#CES015 =
CES017 = Quandl("FRED/DMANEMP") #SA
CES033 = Quandl("FRED/NDMANEMP") #SA
Quandl.api_key(5QFwZ67csueGYWFnB_WW)
Quandl.api_key("5QFwZ67csueGYWFnB_WW")
CES033 = Quandl("FRED/NDMANEMP") #SA
#CES046 =
CESO48 = Quandl("FRED/USTPU") #SA
CES049 = Quandl("FRED/USWTRADE") #SA
CES053 = Quandl("FRED/USTRADE") #SA
CES088 = Quandl("FRED/USFIRE") #SA
CES140 = Quandl("FRED/USGOVT") #SA
#LHEL =
#LHELX =
LHEM = Quandl("FRED/CLF16OV")
## Unenployment (MONTLY)
#LHUR =
LHU680 = Quandl("FRED/UEMPMEAN") #SA #Weeks
LHU5 =  Quandl("FRED/LNS13008397") #SA
LHU14 = Quandl("FRED/LNS13025701") #SA
LHU15 = Quandl("FRED/M08320USM156SNBR") #SA (målt i A Per Cent Of The Total Civilian Labor Force)
LHU26 = Quandl("FRED/LNS13025702") #SA
LHU27 = Quandl("FRED/LNS13025703") #SA
## Hours Starts and Sales (MONTLY) (Thousind of units)
HSBR = Quandl("FRED/HOUST") #Unit SA
#HSFR =
HSNE =  Quandl("FRED/HOUSTNE") #SA
HSMW = Quandl("FRED/HOUSTMW") #SA
HSSOU = Quandl("FRED/HOUSTS") #SA
HSWST = Quandl("FRED/HOUSTW") #SA
##Interest Rates (PROCENT) (NSA) (MONTLY)
FYFF = Quandl("FRED/FEDFUNDS") #NSA
FYGM3 = Quandl("FRED/TB3MS") #NSA
FYGM6 =  Quandl("FRED/TB6MS") #NSA
FYGT1 = Quandl("FRED/GS1") #NSA
FYGT5 = Quandl("FRED/GS5") #NSA
FYG10 = Quandl("FRED/GS10") #NSA
## Money and Credit Quantoty Aggregates
FM1 = Quandl("FRED/M1SL") #SA
MZMSL = Quandl("FRED/MZM") #SA
FM2 = Quandl("FRED/M2SL") #SA
#FMFBA =
FMRRA = Quandl("FRED/TOTRESNS") #NSA
BUSLOANS = Quandl("FRED/BUSLOANS") #SA
## Consumptions
#PI071 =
PI072 = Quandl("FRED/PCEDG") #SA
PI073 = Quandl("FRED/PCEND") #SA
PI074 = Quandl("FRED/PCES") #SA
## Exchange Rates
EXRUS = Quandl("FRED/EXUSEU") #NSA #
EXRSW = Quandl("FRED/EXSZUS") #NSA
EXRJAN = Quandl("FRED/EXJPUS") #NSA
EXRUK = Quandl("FRED/FXRATEGBA618NUPN") #årligt #NSA
EXRCAN = Quandl("FRED/EXCAUS") #NSA
## Hourly Earnings
CES275 = Quandl("FRED/CES0600000008")
Quandl("FEDFUNDS")
Quandl("FRED/FEDFUNDS")
source("/Users/trinegraff/Desktop/Projekt/R/data/setup_data.R")
library(lars)
library(ggplot2)
drops = c("UNRATE")
x = data_train[ , !(colnames(data_train) %in% drops)]
y = data$UNRATE[1:idx]
parm = function(x) {
(sum(x != 0))
}
set.seed(109)
library(elasticnet)
# lasso -------------------------------------------------------------------
lasso_fit = glmnet(x, y, family = "gaussian", alpha = 1, intercept = FALSE, standardize=FALSE)
library(glmnet)
# lasso -------------------------------------------------------------------
lasso_fit = glmnet(x, y, family = "gaussian", alpha = 1, intercept = FALSE, standardize=FALSE)
lasso_cv = cv.glmnet(x, y, intercept = FALSE, family = "gaussian", alpha = 1, standardize=FALSE)
lasso_cv$lambda
lambda_lars = lasso_cv$lambda
cv.enet(x, y, lambda = lambda_lars , alpha =0.2)
?sv.enet
?cv.enet
cv.enet(x, y, lambda = lambda_lars, s =0.2)
warnings()
# lasso -------------------------------------------------------------------
lars_cv = cv.lars(x, y, type = "lasso", intercept = FALSE, normalize = FALSE, trace = TRUE)
lambda_lars = lars_cv$index
cv.enet(x, y, lambda = lambda_lars, s =0.2)
min <- min(lars_cv$cv)
idmin = match(min, lars_cv$cv)
l1_min = lars_cv$index[idmin]
se = (lars_cv$cv + lars_cv$cv.error)[idmin]
idse = lars_cv$cv <= se #større eller lig med en standard afvigelse
l1.1se = max(lars_cv$index[idse], na.rm = TRUE)
l1.1se
match(l1.1se, lars_cv$cv)
match(l1.1se, lars_cv$index)
idse
data.frame(
lambda = c("min", "1se"),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min,, mode = "fraction")), parm(coef(lars_, s = l1.1sd,, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
lars_ = lars(x, y, type = "lasso")
data.frame(
lambda = c("min", "1se"),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min,, mode = "fraction")), parm(coef(lars_, s = l1.1sd,, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
l1_1se = max(lars_cv$index[idse], na.rm = TRUE)
data.frame(
lambda = c("min", "1se"),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min,, mode = "fraction")), parm(coef(lars_, s = l1_1sd,, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
data.frame(
lambda = c("min", "1se"),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min,, mode = "fraction")), parm(coef(lars_, s = l1_1sd,, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
data.frame(
lambda = c("min", "1se"),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min,, mode = "fraction")), parm(coef(lars_, s = l1_1se,, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
df_la = data.frame(lars_cv$index, lars_cv$cv, lars_cv$cv.error)
ggplot(df_la, aes(df_la$lars_cv.index,df_la$lars_cv.cv)) +
geom_errorbar(aes(ymin = df_la$lars_cv.cv + df_la$lars_cv.cv.error,
ymax = df_la$lars_cv.cv - df_la$lars_cv.cv.error, width = .1)) +
geom_point(col = "red") +
labs(x = "Fraktion af sidste L1 norm", y = "MSE", color = "") +
geom_vline(aes(xintercept= l1_min, col = "blue"), linetype="dotted") +
geom_vline(aes(xintercept= l1.1se, col = "brown"), linetype="dotted") +
ggtitle("Lasso") + scale_color_manual(labels = c(expression(lambda[min]), expression(lambda[1][sd])), values = c("blue", "brown"))
data.frame(
lambda = c("min", "1se"),
vaedi = c(l1_min, l1_1se),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min,, mode = "fraction")), parm(coef(lars_, s = l1_1se,, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
data.frame(
lambda = c("min", "1se"),
vaedi = c(l1_min, l1_1se),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min, mode = "fraction")), parm(coef(lars_, s = l1_1se, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
l1_1se
lars_cv$index
match(lars_cv$index, l1_1se)
data.frame(
lambda = c("min", "1se"),
vaedi = c(l1_min, l1_1se),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min, mode = "fraction")), parm(coef(lars_, s = l1_1se, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
source("/Users/trinegraff/Desktop/Projekt/R/data/setup_data.R")
library(lars)
library(ggplot2)
library(elasticnet)
drops = c("UNRATE")
x = data_train[ , !(colnames(data_train) %in% drops)]
y = data$UNRATE[1:idx]
parm = function(x) {
(sum(x != 0))
}
set.seed(109)
# lasso -------------------------------------------------------------------
lars_cv = cv.lars(x, y, type = "lasso", intercept = FALSE, normalize = FALSE, trace = TRUE)
lars_ = lars(x, y, type = "lasso")
min <- min(lars_cv$cv)
idmin = match(min, lars_cv$cv)
l1_min = lars_cv$index[idmin]
se = (lars_cv$cv + lars_cv$cv.error)[idmin]
idse = lars_cv$cv <= se #større eller lig med en standard afvigelse
l1_1se = max(lars_cv$index[idse], na.rm = TRUE)
match(lars_cv$index, l1_1se)
data.frame(
lambda = c("min", "1se"),
vaedi = c(l1_min, l1_1se),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min, mode = "fraction")), parm(coef(lars_, s = l1_1se, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
coef(lars_, s = l1_min)
coef(coef(lasso_fit, s = c(lasso_cv$lambda.min)
)
coef(coef(lasso_fit, s = c(lasso_cv$lambda.min)
)
)
coef(coef(lasso_fit, s = c(lasso_cv$lambda.min)))
coef(coef(lars_, s = c(lars_cv$lambda.min)))
coef(lars_, s = l1_min, mode = "fraction")
b_hat = coef(lars_, s = l1_min, mode = "fraction")
idx_hat = which(b_hat != 0)
b_hat[idx_hat, ]
idx_hat
b_hat[idx_hat]
df_la = data.frame(lars_cv$index, lars_cv$cv, lars_cv$cv.error)
ggplot(df_la, aes(df_la$lars_cv.index,df_la$lars_cv.cv)) +
geom_errorbar(aes(ymin = df_la$lars_cv.cv + df_la$lars_cv.cv.error,
ymax = df_la$lars_cv.cv - df_la$lars_cv.cv.error, width = .1)) +
geom_point(col = "red") +
labs(x = "Fraktion af sidste L1 norm", y = "MSE", color = "") +
geom_vline(aes(xintercept= l1_min, col = "blue"), linetype="dotted") +
geom_vline(aes(xintercept= l1.1se, col = "brown"), linetype="dotted") +
ggtitle("Lasso") + scale_color_manual(labels = c(expression(lambda[min]), expression(lambda[1][sd])), values = c("blue", "brown"))
ggplot(df_la, aes(df_la$lars_cv.index,df_la$lars_cv.cv)) +
geom_errorbar(aes(ymin = df_la$lars_cv.cv + df_la$lars_cv.cv.error,
ymax = df_la$lars_cv.cv - df_la$lars_cv.cv.error, width = .1)) +
geom_point(col = "red") +
labs(x = "Fraktion af sidste L1 norm", y = "MSE", color = "") +
geom_vline(aes(xintercept= l1_min, col = "blue"), linetype="dotted") +
geom_vline(aes(xintercept= l1_1se, col = "brown"), linetype="dotted") +
ggtitle("Lasso") + scale_color_manual(labels = c(expression(lambda[min]), expression(lambda[1][sd])), values = c("blue", "brown"))
c <- tidy(coef(lars_, s= l1_1se))
library(broom)
c <- tidy(coef(lars_, s= l1_1se))
c <- tidy(coef(lars_, s= "l1_1se"))
c <- tidy(coef(lars_, s = l1_min, mode = "fraction")))
c <- tidy(coef(lars_, s = l1_min, mode = "fraction"))
write.csv(c, file = "results")
c <- tidy(coef(lars_, s = l1_min, mode = "fraction"), lars_)
write.csv(c, file = "results_lars")
write.csv(c, file = "results_lars")
lars <- tidy(coef(lars_, s = l1_min, mode = "fraction"), lars_)
write.csv(lars, file = "results_lars")
lars <- tidy(coef(lars_, s = l1_min, mode = "fraction"), lars_)
write.csv(lars, file = "results_lars")
lars <- tidy(coef(lars_, s = l1_min, mode = "fraction"))
write.csv(lars, file = "results_lars")
min <- min(lars_cv$cv)
idmin = match(min, lars_cv$cv)
l1_min = lars_cv$index[idmin]
se = (lars_cv$cv + lars_cv$cv.error)[idmin]
idse = lars_cv$cv <= se #større eller lig med en standard afvigelse
l1_1se = max(lars_cv$index[idse], na.rm = TRUE)
match(lars_cv$index, l1_1se)
data.frame(
lambda = c("min", "1se"),
vaedi = c(l1_min, l1_1se),
error = c(lars_cv$cv[idmin], lars_cv$cv[37]),
p = c(parm(coef(lars_, s = l1_min, mode = "fraction")), parm(coef(lars_, s = l1_1se, mode = "fraction")) )
#fraction fordi vi har L1 norm af vektoren (se plot)
)
lars <- tidy(coef(lars_, s = l1_min, mode = "fraction"))
write.csv(lars, file = "results_lars")
library(broom)
lars <- tidy(coef(lars_, s = l1_min, mode = "fraction"))
write.csv(lars, file = "results_lars")
sink("lars.txt")
coef(lars_, s = l1_min, mode = "fraction")
sink()
?tidy
write.csv(lars_cv, file = "results_lars")
write.csv(lars_cvhh, file = "results_lars")
?write.csv
write.csv(lars_cv, file = "lars_cv")
write.csv(coef(lars_, s = l1_min, mode = "fraction"), file = "result_lars")
source("/Users/trinegraff/Desktop/Projekt/R/unrate/result/cv_lars.R")
source("/Users/trinegraff/Desktop/Projekt/R/unrate/results/cv_lars.R")
read.csv("/results/cv_lars")
read.csv("/results/cv_lars.csv")
read.csv("/results/lars_cv.csv")
read.csv("results/lars_cv.csv")
read.csv("/Users/trinegraff/Desktop/Projekt/R/data/results/lars_cv.csv")
source("/Users/trinegraff/Desktop/Projekt/R/data/setup_data.R")
read.csv("lars_cv.csv")
read.csv("/Users/trinegraff/Desktop/Projekt/R/data/unrate/lars_cv.csv")
read.csv("lars_cv.csv")
read.csv("lars_cv.csv")
setwd("~/Desktop/Projekt/R/unrate")
read.csv("lars_cv.csv")
setwd("~/Desktop/Projekt/R/unrate")
read.csv("lars_cv.csv")
read.csv("results/lars_cv.csv")
read.csv("results/result_lars.csv")
beta = read.csv("results/result_lars.csv")
data.matrix(beta)
x = data_train[ , !(colnames(data_test) %in% drops)]
# testsæt
drops = c("UNRATE")
x = data_train[ , !(colnames(data_test) %in% drops)]
y = data$UNRATE[1:idx]
y = data$UNRATE[idx,]
y = data$UNRATE[idx:]
y = data$UNRATE[idx:,]
y = data$UNRATE[idx:lenght(x)]
length(x)
rowlength(x)
collength(x)
length(col(x))
length(row(x))
y = data$UNRATE[idx:]
y = data$UNRATE[idx:,]
y = data_train$UNRATE
read.csv("results/lars_cv.csv")
beta = read.csv("results/result_lars.csv")
?predict
?se.fit
se.fit
predict.lasso
predict.glm
y = data_train$UNRATE[idx:,]
setwd("~/Desktop/Projekt/R/unrate")
read.csv("results/lars_cv.csv")
beta = read.csv("results/result_lars.csv")
beta
as.vector(beta)
beta[nonzeroes]
n.zero = which(!isZero(beta))
n.zero = parm(beta)
parm = function(x) {
(sum(x != 0))
}
n.zero = parm(beta)
n.zero
beta
n.zero = parm(beta$x)
n.zero
n.zero = which(!isZero(beta$x))
n.zero = which(!parm(beta$x))
n.zero
beta = beta_hat
beta_hat = beta
which(b_hat != 0)
which(beta_hat$x!= 0)
idx_beta = which(beta_hat$x!= 0)
colnames(x)[idx_beta]
beta_hat = beta$x[idx_beta]
beta_hat
beta_hat = beta[idx_beta]
beta_hat = beta[idx_beta,]
beta_hat
colnames(x)[idx_beta]
x
is.dataframe(x)
is.dataframe(x)
is.data.frame(x)
as.data.frame(x)
df_x = as.data.frame(x)
library(tidyverse)
idx_beta
fc.var <- df_x %>% tail(n = 1) %>% select(idx_beta)
fc.var
lars_ = lars(x, y, type = "lasso")
y.fc = drop(as.matrix(fc.var) %>% beta_hat)
beta_hat = beta[idx_beta,]
beta_hat
y.fc = drop(as.matrix(fc.var) %>% beta_hat$x)
fc.var
Lasso_fc = function(x, y, h, lambda.opt){
n.obs = length(y)
fc.y = y[(1+h):n.obs]
fc.vars = as.matrix(x[(1:n.obs - h), ])
}
Lasso_fc(x,y,1)
Lasso_fc = function(x, y, h, lambda.opt){
n.obs = length(y)
fc.y = y[(1+h):n.obs]
fc.vars = as.matrix(x[(1:n.obs - h), ])
print(fc.vars)
}
Lasso_fc(x,y,1)
glmnet(x,y)
library(glmnet)
glmnet(x,y)
f = glmnet(x,y)
f$a0
?glmnet
f = glmnet(x,y, intercept = F)
f
?predict.glmnet
glmnet::predict(x,y)
cv_lars = read.csv("results/lars_cv.csv")
fc.y = y[(1+h):n.obs]
h = 1
fc.y = y[(1+h):n.obs]
n.obs = length(y)
h = 1
fc.y = y[(1+h):n.obs]
fc.vars = as.matrix(x[(1:n.obs - h), ])
fc.y
length(fc.y)
length(y)
fc.vars = as.matrix(x[(1:n.obs - h), ])
fc.vars
fc.vars[,2]
# insample ----------------------------------------------------------------
min <- min(lars_cv$cv)
lars_cv = read.csv("results/lars_cv.csv")
# insample ----------------------------------------------------------------
min <- min(lars_cv$cv)
min
lambda.opt = min
beta_opt = beta
beta
n.zero = which(b_opt != 0)
n.zero = which(beta_opt != 0)
n.zero
beta_opt
n.zero
source("/Users/trinegraff/Desktop/Projekt/R/data/setup_data.R")
setwd("~/Desktop/Projekt/R/unrate")
lars_cv = read.csv("results/lars_cv.csv")
beta = read.csv("results/result_lars.csv")
drops = c("UNRATE")
x = data_train[ , !(colnames(data_train) %in% drops)]
y = data$UNRATE[1:idx]
parm = function(x) {
(sum(x != 0))
}
# insample ----------------------------------------------------------------
min <- min(lars_cv$cv)
idmin = match(min, lars_cv$cv)
l1_min = lars_cv$index[idmin]
n.obs = length(y)
h = 1
fc.y = y[(1+h):n.obs] #fjerner en observation
fc.vars = as.matrix(x[(1:n.obs - h), ]) #fjerner en observation
lambda.opt = min
beta_opt = beta
n.zero = which(beta_opt != 0)
n.zero
beta_opt
f
f = which(beta_opt != 0)
f
beta_opt
beta_opt = as.vector(beta)
beta_opt
beta_opt = as.data.frame(beta)
beta_opt
